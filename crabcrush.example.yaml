# CrabCrush 配置文件示例
# 复制为 crabcrush.yaml 并修改

# 服务端口（默认 18790）
port: 18790

# 绑定地址：loopback 仅本机访问，all 允许外部访问
bind: loopback

# 调试模式：打印发给模型的上下文摘要等详细日志（默认关闭）
# debug: true

# 认证配置
# auth:
  # WebChat 访问令牌（不设则每次启动自动生成随机令牌）。设置后可固定令牌，方便收藏书签
  # token: your-fixed-token-here

# 模型配置
# 支持 DeepSeek、通义千问(qwen)、Kimi、智谱GLM(glm)、豆包(doubao) 等
# 已知提供商不需要填 baseURL，自动补全
models:
  deepseek:
    apiKey: sk-your-deepseek-api-key
    # baseURL: https://api.deepseek.com/v1  # 可省略
    # defaultModel: deepseek-chat            # 可省略

  # qwen:
    # apiKey: sk-your-qwen-api-key
    # defaultModel: qwen-max

# Agent 配置
agent:
  # 模型名称，支持两种格式："deepseek-chat" 自动匹配 deepseek 提供商; "qwen/qwen-max" 显式指定提供商/模型
  model: deepseek/deepseek-chat

#  Failover：主模型失败时自动切换（可选）
#  fallbackModels:
#    - qwen/qwen-plus

  systemPrompt: "你是 CrabCrush，一个友好的 AI 助手。请用中文回复。"
  maxTokens: 4096

  # 发给 API 的最大消息条数（1 轮对话 = 2 条消息，默认 40 = 最近 20 轮），越大记忆越长，但 token 消耗越多（= 越贵）
  contextWindow: 40

# 工具配置
tools:
  # read_file 可读取的根目录，默认 ~/.crabcrush。环境变量 CRABCRUSH_FILE_BASE 优先
  # fileBase: /path/to/your/dir

# Owner 用户 ID（只有 owner 能触发本地操作类工具）
# 不配置时默认所有用户都是 owner（适合个人使用）
# 放到群聊时建议配置，防止其他人操控你的电脑
# ownerIds:
#   - "钉钉userId"
#   - "飞书openId"

# 渠道配置
channels:
  # 钉钉机器人（Stream 模式，不需要公网 IP）
  # 需要先在钉钉开放平台创建企业内部应用，获取 clientId(AppKey) 和 clientSecret(AppSecret)
  # 详见：https://opensource.dingtalk.com/developerpedia/docs/explore/tutorials/stream/bot
  dingtalk:
    enabled: false
    clientId: your-dingtalk-client-id
    clientSecret: your-dingtalk-client-secret

# 也可以通过环境变量配置：
# 模型 API Key：
#   export CRABCRUSH_DEEPSEEK_API_KEY=sk-xxx
#   export CRABCRUSH_QWEN_API_KEY=sk-xxx
# 钉钉：
#   export CRABCRUSH_DINGTALK_CLIENT_ID=xxx
#   export CRABCRUSH_DINGTALK_CLIENT_SECRET=xxx
