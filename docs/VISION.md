# CrabCrush 项目愿景与竞品分析

## 一、我们要做什么

### 一句话

**CrabCrush 是面向中国用户的本地优先个人 AI 助手平台。**

用户在微信、钉钉、飞书等已有的聊天工具里，就能拥有一个强大的 AI 助手——
不需要安装新 App，不需要把数据交给第三方，所有东西都跑在自己的机器上。

### 为什么做这个

2025-2026 年，AI 助手爆发式增长，但中国用户面临一个尴尬局面：

1. **国际开源项目水土不服**：OpenClaw 等项目很优秀，但渠道（WhatsApp/iMessage）、模型（Claude/GPT）、基础设施（AWS/GCP）全都不适合中国用户
2. **国内产品"围墙花园"**：各家大厂做的 AI 助手都是封闭的，数据在云端，用户没有控制权
3. **开发者缺少好工具**：想自己搭一个 AI 助手，要对接各种 API，处理各种兼容性问题，门槛很高

CrabCrush 要解决的核心问题：**让中国用户也能拥有一个真正属于自己的、跑在自己设备上的 AI 助手。**

### 目标用户

| 用户类型 | 典型场景 | 优先级 |
|---------|---------|--------|
| **技术人员** | 日常编程辅助、知识管理、自动化脚本 | P0（早期核心用户） |
| **小团队/创业者** | 团队协作助手、客服机器人、内部知识库 | P0 |
| **个人效率爱好者** | 日程管理、信息整理、生活服务查询 | P1 |
| **企业 IT 部门** | 部署内部 AI 助手，数据不出公司网络 | P2 |

---

## 二、竞品分析

### 2.1 OpenClaw（核心参照对象）

| 维度 | OpenClaw 的做法 | 我们的策略 |
|------|----------------|-----------|
| **定位** | 个人 AI 助手，面向全球（实际主要欧美） | 个人 AI 助手，面向中国用户 |
| **渠道** | WhatsApp, Telegram, Slack, Discord, iMessage, Signal, Teams, Google Chat | 企业微信, 钉钉, 飞书, 微信, QQ, Telegram, WebChat |
| **模型** | Claude（推荐）, GPT | DeepSeek（推荐）, 通义千问, Kimi, Claude, GPT |
| **架构** | Gateway + Pi Agent + Channel Adapters | 类似，但针对国内生态重新设计 |
| **语言** | TypeScript | TypeScript（保持一致） |
| **语音** | ElevenLabs | 讯飞/阿里/腾讯语音服务 |
| **部署** | npm 全局安装 + launchd/systemd daemon | npm + Docker + 一键脚本（支持宝塔面板等） |
| **Stars** | 189k+ | 从零开始 |

**OpenClaw 值得学习的地方：**
- Gateway 架构设计（WebSocket 控制面）非常优雅 ✅ 已借鉴
- Onboarding Wizard（向导式引导）体验极好 ✅ 已实现
- Doctor 命令（自检诊断）的运维思路 ✅ 已实现
- Skills 系统的 SKILL.md 插件化设计（Phase 2a 借鉴）
- 多会话隔离 + Docker 安全沙箱（DEC-026 已规划）
- "能干活"才是爆火核心——不是因为"能聊天"，而是浏览器控制、自动回邮件等工具能力

**OpenClaw 不适合中国的地方：**
- 渠道完全不匹配（国内没人用 WhatsApp/iMessage）
- 模型推荐 Claude，国内访问受限
- 没有内容审核机制（国内合规需要）
- 没有考虑 GFW 网络环境
- 不支持中文语音服务
- 没有国内常见的富交互（卡片消息、小程序等）

**OpenClaw 的已知痛点（= CrabCrush 的机会）：**

| 痛点 | OpenClaw | CrabCrush 优势 |
|------|---------|---------------|
| **API 成本高** | Claude Opus ~¥100+/百万 token，用户月均 ~¥1800 | DeepSeek ¥1-2/百万 token，**便宜 50-100 倍**；GLM-4-Flash 几乎免费 |
| **部署复杂** | 需要 Docker + Python + WSL2（Windows），非程序员难以部署 | `pnpm install && pnpm dev`，一条命令启动 |
| **需要公网 IP** | 多数渠道需要公网 IP / 反向代理 / Tailscale | 钉钉 Stream 模式不需要公网 IP，本地即可工作 |
| **稳定性差** | 依赖 Claude API，网络波动导致任务失败 | 国产模型延迟低 + Failover 自动切换 |
| **硬件绑定** | 推荐 Mac Mini M4 7×24 运行 | 任何有 Node.js 的设备都行 |

**不应该学 OpenClaw 的地方：**
- **原生 App**：OpenClaw 花大量精力做 macOS/iOS/Android App，CrabCrush 坚持"渠道即入口"，不需要额外 App
- **大而全**：OpenClaw 9500+ commit、540 贡献者，代码量巨大。CrabCrush 保持精简，先做核心场景极致

### 2.2 其他竞品

| 项目/产品 | 类型 | 优势 | 劣势 |
|-----------|------|------|------|
| **Dify** | 开源 LLMOps 平台 | 可视化编排，支持国产模型 | 偏向开发平台，非个人助手 |
| **FastGPT** | 开源知识库问答 | 知识库能力强 | 渠道支持少，非通用助手 |
| **ChatGPT-on-WeChat** | 开源微信机器人 | 简单易用 | 功能单一，仅微信，无架构设计 |
| **Coze（扣子）** | 字节跳动 AI 平台 | 拖拽搭建，渠道丰富 | 闭源，数据在云端，依赖字节 |
| **通义千问 App** | 阿里 AI 助手 | 中文能力强 | 闭源，不能本地部署 |

**CrabCrush 的差异化定位：**
- 不是 LLMOps 平台（区别于 Dify）
- 不是单一渠道机器人（区别于 ChatGPT-on-WeChat）
- 不是云端 SaaS（区别于 Coze/通义千问）
- 是一个**完整的、本地优先的、多渠道个人 AI 助手**

---

## 三、核心能力规划

### 3.1 渠道能力（Channel）

**基本原则：用户在哪里，助手就在哪里。**

> 策略：一个渠道做到位再做下一个，不并行铺开。详见 DEC-003, DEC-004。

#### 按开发顺序

| 顺序 | 渠道 | 接入方式 | 难度 | 说明 |
|------|------|---------|------|------|
| 1st | **WebChat** | 自建 | 低 | 兜底渠道，零外部依赖，方便调试 |
| 2nd | **钉钉** | 官方开放平台（Stream 模式优先 / HTTP 回调） | 中 | 第一个正式渠道，Stream 模式不需要公网 IP（详见 DEC-003） |
| 3rd | **飞书** | 官方开放平台（WebSocket 模式 / HTTP 回调） | 中 | 第二个渠道，验证渠道抽象层，API 设计最优雅 |
| 4th | **企业微信** | 官方 API（应用消息+机器人） | 中 | 第三个渠道，与微信生态打通 |
| 后续 | **Telegram** | 官方 Bot API | 低 | 技术圈用户多 |
| 后续 | **QQ** | 官方机器人平台 | 中 | 年轻用户群体 |
| 暂缓 | ~~微信个人号~~ | 逆向/第三方库 | 高 | 逆向风险高，近期不做（详见 DEC-005） |

#### 远期扩展

| 渠道 | 说明 |
|------|------|
| 微信公众号 | 公开服务 |
| 微信小程序 | 移动端入口 |
| Discord | 游戏/国际社区 |
| Slack | 外企用户 |
| 短信 | 通知推送 |
| 邮件 | 异步沟通 |

### 3.2 模型能力（Model）

**基本原则：模型无关，用户自由选择，优先推荐国产高性价比模型。**

- 使用 OpenAI 兼容通用适配器覆盖大部分国产模型，无需为每个模型写独立代码（详见 DEC-009）
- 支持自动路由、Failover、成本控制
- 接口设计详见 `docs/ARCHITECTURE.md` 模型层章节
- **V1 优先支持**：DeepSeek + 通义千问（详见 DEC-011）
- **后续接入**（按 OpenAI 兼容度排序）：Kimi（月之暗面）、智谱 GLM、豆包（字节跳动）
- **国际模型**（Phase 3）：Claude（Anthropic）、GPT-4o/GPT-5（OpenAI）、Gemini（Google）
- **本地模型**（Phase 3）：Ollama（本地运行开源模型）

### 3.3 工具能力（Tools）

**基本原则：开箱即用的高频工具 + 可扩展的技能系统。**

#### 内置工具

| 工具 | 说明 |
|------|------|
| **网页浏览** | 搜索（支持百度/Google）、网页抓取、截图 |
| **代码执行** | 沙箱内运行 Python/JS/Shell |
| **文件操作** | 读写本地文件、文档解析（PDF/Word/Excel） |
| **知识库** | 本地向量数据库，支持 RAG |
| **定时任务** | Cron 定时提醒、定时汇报 |

#### 中国特色工具

| 工具 | 说明 |
|------|------|
| **快递查询** | 快递100/菜鸟 API |
| **天气查询** | 和风天气/中国气象 |
| **日历** | 公历+农历+节假日+调休 |
| **翻译** | 中英互译（集成多个翻译引擎） |
| **汇率** | 实时汇率查询 |
| **热搜** | 微博/知乎/抖音热搜 |

### 3.4 语音能力（Voice）

| 能力 | 服务商选择 | 说明 |
|------|-----------|------|
| 语音识别（ASR） | 讯飞/阿里/腾讯/Whisper | 中文识别准确率优先 |
| 语音合成（TTS） | 讯飞/阿里/腾讯/Edge TTS | 自然度 + 方言支持 |
| 语音唤醒 | 讯飞/Picovoice | "你好螃蟹"/"Hey Crab" |
| 实时对话 | WebRTC + ASR + TTS | 类似 OpenClaw 的 Talk Mode |

### 3.5 安全与合规

| 能力 | 说明 |
|------|------|
| **内容审核** | 集成阿里/腾讯内容安全 API，过滤违规内容 |
| **数据加密** | 本地数据 AES 加密存储 |
| **访问控制** | 基于配对码的 DM 策略（参考 OpenClaw） |
| **审计日志** | 记录所有操作，可追溯 |
| **网络安全** | HTTPS/WSS，支持内网部署 |

---

## 四、技术策略

### 为什么选 TypeScript

详见 DEC-002。简言之：项目本质是 I/O 密集型消息网关 + Web 界面，Node.js 天然适合；TypeScript 全栈统一减少复杂度。

### 为什么本地优先

1. **数据隐私**：对话内容不上传第三方服务器
2. **低延迟**：本地 Gateway 响应快
3. **离线能力**：核心功能不依赖外网（配合本地模型如 Ollama）
4. **自主可控**：用户完全掌控自己的助手

### 借鉴 vs 自研

| 模块 | 策略 | 说明 | 状态 |
|------|------|------|------|
| Gateway 架构 | 借鉴 OpenClaw 思路，自主实现 | WS 控制面是好设计 | V1 已完成 |
| 渠道适配器 | 完全自研 | 国内渠道和国际渠道完全不同 | V1 已完成（WebChat + 钉钉） |
| 模型接口层 | 借鉴 + 自研 | 统一接口 + 路由 + Failover + 费用估算 | V1 已完成 |
| Skills 系统 | 借鉴 SKILL.md 设计，自主实现 | 插件化架构通用 | Phase 2a 待做 |
| Web UI | 自研 | 更符合国内审美和交互习惯 | V1 基础版已完成 |
| CLI 工具 | 借鉴 | onboard/doctor 等命令是好实践 | V1 已完成 |
| 工具调用 | 借鉴思路，优先级提升 | 浏览器控制是最高价值工具（DEC-027） | Phase 2a 待做 |
| 原生 App | 不做 | 坚持"渠道即入口"，不做 macOS/iOS App | 明确不做 |

---

## 五、项目愿景总结

```
🦀 CrabCrush 的愿景：

让每个中国用户都能拥有一个
跑在自己设备上的、
能听懂中国话的、
在微信钉钉飞书里随时可用的、
真正属于自己的 AI 助手。
```

### 成功标准

#### V1（1.0）— 硬边界，详见 DEC-011

- [ ] 用户 5 分钟内完成本地模式安装并与 DeepSeek 对话
- [ ] 用户 15 分钟内完成渠道模式配置并在钉钉中使用
- [ ] 支持 WebChat + 钉钉两个渠道
- [ ] 支持 DeepSeek + 通义千问两个模型
- [ ] 流式输出延迟 < 500ms（首字节到达时间）

#### 远期愿景（V2+）

- [ ] 至少支持 5 个渠道（钉钉 + 飞书 + 企微 + Telegram + WebChat）
- [ ] 至少支持 5 个国产模型
- [ ] 内置中国特色工具（快递、天气、日历等）
- [ ] 支持中文语音交互
- [ ] Docker 一键部署 + 宝塔面板支持
